# CÃ“DIGO DO DASHBOARD ADMINISTRATIVO (app/admin/page.tsx)

## ğŸ“Š Funcionalidades do Dashboard:

### 1. Sistema de Login:
- Senha protegida: "venturini2024"
- Interface de login centralizada
- ValidaÃ§Ã£o de acesso

### 2. Filtros AvanÃ§ados por Data:
- SeleÃ§Ã£o de perÃ­odo personalizado (Data InÃ­cio/Fim)
- Filtros rÃ¡pidos: 7, 30, 90 dias, este ano
- ValidaÃ§Ã£o de datas (fim nÃ£o pode ser anterior ao inÃ­cio)
- Indicador visual quando filtro estÃ¡ ativo

### 3. Cards de MÃ©tricas:
- Total de Pesquisas
- NPS MÃ©dio
- Score NPS (cÃ¡lculo: % Promotores - % Detratores)
- Promotores (notas 9-10)

### 4. Sistema de Abas (4 principais):

#### Aba 1 - VisÃ£o Geral:
- GrÃ¡fico de Pizza: DistribuiÃ§Ã£o NPS (Promotores/Neutros/Detratores)
- Resumo Geral: EstatÃ­sticas consolidadas
- Cores: Verde (Promotores), Amarelo (Neutros), Vermelho (Detratores)

#### Aba 2 - Timeline:
- GrÃ¡fico de linha temporal
- EvoluÃ§Ã£o das pesquisas por dia
- NPS mÃ©dio por perÃ­odo
- VisualizaÃ§Ã£o da tendÃªncia

#### Aba 3 - AvaliaÃ§Ã£o por Ãrea:
- GrÃ¡fico de barras por Ã¡rea de serviÃ§o
- Cards individuais por Ã¡rea com:
  - MÃ©dia de notas (0-5)
  - Total de avaliaÃ§Ãµes
  - Feedbacks positivos
  - Feedbacks de melhoria

#### Aba 4 - Pesquisas Recentes:
- Tabela com todas as pesquisas
- Colunas: ID, Empresa, ResponsÃ¡vel, NPS, Categoria, Data
- Badges coloridos por categoria (Promotor/Neutro/Detrator)
- OrdenaÃ§Ã£o por data (mais recentes primeiro)

## ğŸ”§ Interfaces TypeScript:

### Pesquisa:
```typescript
interface Pesquisa {
  id: number;
  empresa: string;
  responsavel: string;
  nps: number;
  data_criacao: string;
}
```

### Stats:
```typescript
interface Stats {
  total_pesquisas: number;
  nps_medio: number;
  promotores: number;
  neutros: number;
  detratores: number;
  nps_score: number;
}
```

### AreaData:
```typescript
interface AreaData {
  area: string;
  media_nota: number;
  total_avaliacoes: number;
  feedbacks_melhoria: number;
  feedbacks_positivos: number;
}
```

### TimelineData:
```typescript
interface TimelineData {
  data: string;
  pesquisas: number;
  nps_medio: number;
}
```

## ğŸ“ˆ Componentes de GrÃ¡ficos (Recharts):

### 1. PieChart - DistribuiÃ§Ã£o NPS:
```javascript
const npsData = [
  { name: 'Promotores', value: promotores, color: '#10b981' },
  { name: 'Neutros', value: neutros, color: '#f59e0b' },
  { name: 'Detratores', value: detratores, color: '#ef4444' }
];
```

### 2. BarChart - AvaliaÃ§Ã£o por Ãrea:
- Eixo X: Ãreas de serviÃ§o
- Eixo Y: MÃ©dia de notas (0-5)
- Cor: slate-900 (preto)

### 3. LineChart - Timeline:
- Barras: Quantidade de pesquisas por dia
- Linha: NPS mÃ©dio por dia
- Dois eixos Y (esquerdo: pesquisas, direito: NPS)

## ğŸ¨ Componente DateFilter:

### Funcionalidades:
- Campos de data inÃ­cio/fim
- BotÃµes Filtrar/Limpar
- Filtros rÃ¡pidos com botÃµes
- ValidaÃ§Ã£o de datas
- Loading states

### Filtros RÃ¡pidos:
```javascript
const aplicarFiltroRapido = (dias: number) => {
  const fim = new Date().toISOString().split('T')[0];
  const inicio = new Date(Date.now() - dias * 24 * 60 * 60 * 1000)
    .toISOString().split('T')[0];
  onDataInicioChange(inicio);
  onDataFimChange(fim);
};
```

## ğŸ“Š FunÃ§Ãµes de Dados:

### carregarDados:
- Faz requisiÃ§Ã£o GET para /api/pesquisa
- Suporte a parÃ¢metros de filtro (dataInicio, dataFim)
- Atualiza todos os estados (stats, areas, pesquisas, timeline)

### exportarCSV:
- Gera arquivo CSV com dados filtrados
- Headers: ID, Empresa, ResponsÃ¡vel, NPS, Data
- Nome do arquivo inclui perÃ­odo se filtrado

### FunÃ§Ãµes de ClassificaÃ§Ã£o NPS:
```javascript
const getNPSColor = (nps: number) => {
  if (nps >= 9) return 'text-green-600';  // Promotor
  if (nps >= 7) return 'text-yellow-600'; // Neutro
  return 'text-red-600';                  // Detrator
};

const getNPSBadge = (nps: number) => {
  if (nps >= 9) return <Badge variant="success">Promotor</Badge>;
  if (nps >= 7) return <Badge variant="warning">Neutro</Badge>;
  return <Badge variant="destructive">Detrator</Badge>;
};
```

## ğŸ¯ Estados do Componente:

### Estados Principais:
- autenticado: boolean (controle de login)
- pesquisas: Pesquisa[] (lista de pesquisas)
- stats: Stats | null (mÃ©tricas gerais)
- areas: AreaData[] (dados por Ã¡rea)
- timeline: TimelineData[] (dados temporais)
- carregando: boolean (loading state)

### Estados de Filtro:
- dataInicio: string (data inÃ­cio do filtro)
- dataFim: string (data fim do filtro)
- filtroAtivo: boolean (indica se hÃ¡ filtro aplicado)

## ğŸ”’ SeguranÃ§a:
- Senha hardcoded: "venturini2024"
- ValidaÃ§Ã£o no frontend
- ProteÃ§Ã£o de rotas administrativas
